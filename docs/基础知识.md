## WebGL简介
WebGL使得我们可以使用基于OpenGL ES 2.0的API在canvas中进行3D渲染。WebGL程序由Javascript代码和在GPU中执行的shader code（着色器代码）组成。如下：
- JavaScript
- glsl。shader language。着色器语言，在GPU中执行
  - vertext shader。顶点着色器
  - fragment shader。片源着色器(片源可以简单理解为像素)

## 渲染管线 vertex、fragment



## 图片

图片一般来说包括两种：

- 矢量图。比如 svg，无限放大不会失真，不会出现锯齿
- 位图。即像素图。图像由很多很多的像素点组成

矢量图为什么可以做到无限放大，而不会失真呢？这是因为矢量图记录的是数学上的函数曲线，比如 `x * x + y * y =< r * r`

最终展示在屏幕上的都是位图。

浏览器渲染一个图形时，比如渲染一个三角形，会包含两个步骤

- 首先确定三角形 3 个顶点的信息，这就是 vertext。知道这三个点，就可以知道三角形包含多少个像素
- 将三角形包含的所有像素着色，这就是 fragment

## webgl program

对于一个 webgl program，我们需要提供 vertex shader 和 fragment shader。这两个都是字符串，传递给 gpu。这就是一个简单的 webgl 程序的构成。

以一个三角形为例，vertex shader 就是这个三角形 3 个点的信息，比如点的坐标、颜色、贴图坐标、法向量等等。然后通过三个点的信息，能够计算出它所形成的图形包含了哪些像素，我们可以理解为空的像素。然后第二步，通过这些空的像素，我们可以提供 fragment shader，对这些空像素进行填色，这样就形成了一个图像。这就是渲染的过程

## 齐次坐标

我们在使用 WebGL 时，会给顶点着色器参数赋值，gl_Position 的数据类型为 vec4，gl_Position = vec4(0.0, 0.0, 0.0, 1.0)。但实际需要的位置坐标只有三个(x,y,z)值。WebGL 提供了 vec4 函数。由 4 个分量组成的矢量被称为`齐次坐标`，能够提高三维数据的效率，在三维图形系统大量使用。如果最后一个分量设置为 1.0，那么`齐次坐标`可以表示前三个分量为坐标值的那个点。所有当需要用齐次坐标表示顶点时，只需要将最后一个分量设置为 1.0 就可以了。

```js
let vertexSource = `
    void main(){
        gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
        gl_PointSize = 10.0;
    }
`;
```

`vec4` 第四个数是关于齐次坐标系的。一般面试 webgl 岗位的话，一定会问这个问题。简单来说就是，对于三维空间中物体的变化，比如旋转、缩放、平移，这些变化都会用到矩阵运算。对于三维空间中的变换矩阵，必须要四维才可以，这是由线性代数里面齐次坐标决定的。

这里可以复习下线性代数齐次坐标的概念
