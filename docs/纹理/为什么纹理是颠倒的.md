## TODO


纹理的工作原理
加载与创建
使用 gl.texImage2D() 或 gl.texSubImage2D() 将图像数据上传到 GPU。
纹理坐标映射
模型顶点通过 (u, v) 纹理坐标（范围 [0,1] 或 [1,0]）绑定到纹理。
示例：立方体的每个面对应纹理的不同区域。
着色器采样
在片段着色器（Fragment Shader）中，通过 texture2D() 函数获取像素值，并计算最终颜色。




WebGL 纹理数据的类型非常丰富，涵盖图像、程序生成的数据、特殊效果映射等。以下是常见的纹理数据分类及其特点：
---
### **1. 基础图像数据**
通过图像文件（如 PNG、JPEG、DDS 等）加载的 2D 纹理，是最常见的类型：
- **位图（Bitmap）**：像素级别的栅格数据（如木纹、皮肤纹理）。
- **矢量图（Vector）**：可缩放的路径数据（需转换为位图后使用）。
- **透明背景支持**：支持 Alpha 通道的图像（如 PNG）。

#### **典型用途**：
- 贴图（如衣服、地板）
- UI 元素（按钮、图标）

---

### **2. 程序生成的纹理数据**
无需外部图像，直接通过算法生成：
- **纯色/渐变**：线性或径向渐变（如金属光泽、玻璃反光）。
- **噪声纹理**：Perlin 噪声、Simplex 噪声（用于模拟粗糙表面、火焰）。
- **规则网格**：棋盘格、条纹等重复模式。
- **数学函数生成**：基于 `sin()`、`cos()` 的复杂图案。

#### **示例代码（生成 2D 噪声纹理）**：
```javascript
function generateNoise(width, height) {
  const noise = new Uint8Array(width * height);
  for (let i = 0; i < width; i++) {
    for (let j = 0; j < height; j++) {
      const value = Math.floor(256 * Math.random());
      noise[i * height + j] = value;
    }
  }
  return noise;
}
```

---

### **3. 特殊效果映射数据**
用于模拟复杂光照或物理效果：
- **法线贴图（Normal Map）**：存储表面凹凸信息（通过 RGB 通道编码法向量）。
- **置换贴图（Displacement Map）**：直接修改顶点位置，制造高度细节。
- **环境光遮蔽贴图（Occlusion Map）**：增强暗部阴影的真实感。
- **发光贴图（Emissive Map）**：独立于光照的发光效果（如屏幕边缘的高光）。

#### **法线贴图原理**：
![](https://via.placeholder.com/300x200.png?text=Normal+Map+Example)

---

### **4. 压缩纹理格式**
为了节省带宽和内存，广泛使用的压缩格式：
| 格式          | 特点                          | 兼容性               |
|---------------|-----------------------------|---------------------|
| **DDS**       | 支持 MIPMAP 和区块压缩（BCn）  | WebGL 原生支持      |
| **PVRTC**     | 高效压缩，移动端常用          | iOS/Android 优先    |
| **ETC1/ETC2**  | 低功耗，适合嵌入式设备          | Android 主流         |
| **ASTC**      | 高压缩率，动态分辨率适配        | 现代浏览器支持      |
| **WebP**      | 有损压缩，支持透明度          | 浏览器逐步支持      |

---

### **5. 3D 纹理数据**
用于体积渲染或复杂场景：
- **3D 纹理**：三维数组数据，存储 voxels（体素）信息（如烟雾、液体）。
- **2D 数组纹理**：多层 2D 纹理堆叠（如多层地形贴图、动画帧序列）。

#### **体积纹理的应用**：
![](https://via.placeholder.com/300x200.png?text=3D+Texture+Volume+Rendering)

---

### **6. 高动态范围（HDR）纹理**
保留高亮度范围的数据，配合后期处理（如 Bloom、光晕）：
- **格式**：HDR 图像（如 `.exr`）
- **用途**：模拟真实光照环境（如阳光直射、反射高光）

---

### **7. 纹理数据的其他形式**
- **深度贴图（Depth Map）**：存储场景深度信息，用于阴影或 SSAO。
- **权重贴图**：用于骨骼动画的顶点权重分布。
- **遮罩贴图（Mask）**：通过 Alpha 通道控制区域可见性（如树叶镂空）。

---

### **8. 实际开发中的数据处理**
- **动态生成**：根据运行时参数实时修改纹理数据（如水流的动态扰动）。
- **视频流**：将 `VideoTexture` 动态绑定到材质（如实时视频背景）。
- **Cube Map 的六个面**：需手动加载或生成六个方向的图像/数据。

---

### **总结**
- **基础需求**：优先使用 PNG/JPEG + MIPMAP。
- **高性能需求**：选择压缩格式（如 DDS/PVRTC）。
- **复杂效果**：结合法线贴图、置换贴图等高级数据。
- **程序化内容**：通过代码生成噪声或渐变纹理。

根据具体场景选择合适的纹理数据类型，能显著提升渲染效率和视觉效果！