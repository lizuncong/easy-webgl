## webgl图像处理

https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-image-processing.html


## 三维纹理

https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-3d-textures.html


纹理是通过“纹理坐标”来引用的， 纹理坐标 0.0 到 1.0 对应纹理从左到右，0.0 到 1.0 对应第一个像素所在行到最后一行。 注意我没有使用上或者下，上下在纹理坐标空间中是没有意义的，因为绘制一些东西后再重定向后， 是没有上下的概念的，主要是依据传递给WebGL的纹理数据，纹理数据的开头对应纹理坐标 0, 0， 结尾对应纹理坐标 1, 1

如果纹理坐标再 0.0 到 1.0 之外会怎样？WebGL默认会重复纹理， 0.0 到 1.0 是一份纹理的“拷贝”，1.0 到 2.0 是另外一份拷贝， -4.0 到 -3.0 也是另外一份拷贝。让我们在一个平面上使用这些纹理坐标

你可以使用CLAMP_TO_EDGE告诉WebGL再某个方向不需要重复，例如

你可能注意到在加载纹理时调用了 gl.generateMipmap，那是干什么的？


假设我们有这样一个 16×16 像素的纹理。假设我们要将它绘制在屏幕的 2×2 个像素上，那么这 4 个像素
应该使用什么颜色？事实上 GPU 使用的是一个纹理贴图（mipmap），
纹理贴图是一个逐渐缩小的图像集合， 每一个是前一个的四分之一大小，
16×16 纹理的纹理贴图看起来像这样。

通常每个子图都是前一级的双线性插值，这就是 gl.generateMipmap 做的事情， 它根据原始图像创建所有的缩小级别，你也可以自己提供缩小级别的图像。

现在如果你想将 16x16 像素的纹理绘制到屏幕的 2×2 个像素上， WebGL会从创建的贴图中找到从之前级别贴图插值出的 2×2 贴图来使用。


设置筛选器可以调用 gl.texParameter

gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);

TEXTURE_MIN_FILTER 是当绘制的比最大贴图小的时候。 TEXTURE_MAG_FILTER 是绘制的比最大的贴图大的时候。 对于 TEXTURE_MAG_FILTER 只有 NEAREST 和 LINEAR 两个可选设置。



为什么键盘的纹理没有出现？那是因为WebGL限制了纹理的维度必须是2的整数次幂， 2 的幂有 1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 等等。 'F' 纹理是 256 × 256，256 是 2 的幂。键盘纹理是 320x240，都不是 2 的幂， 所以显示纹理失败，在着色器中当 texture2D 被调用的时候由于纹理没有正确设置， 就会使用颜色 (0, 0, 0, 1) 也就是黑色。如果打开 JavaScript 控制台或者浏览器控制台， 根据浏览器不同可能会显示不同的错误信息，像这样



解决这个问题只需要将包裹模式设置为 CLAMP_TO_EDGE 并且通过设置过滤器为 LINEAR or NEAREST 来关闭贴图映射----为什么这样设置可以关闭贴图映射？