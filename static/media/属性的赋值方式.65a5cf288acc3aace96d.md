## 前言

WebGL代码由一对着色程序组成，即`顶点着色器`和`片段着色器`。着色器代码都是在GPU中运行，它们所需的任何数据都需要发送到GPU，在GPU中读取。着色器可以通过下面4种方法获取数据：

- 属性(Attributes)和缓冲。属性仅适用于顶点着色器
- 全局变量（Uniforms）。在一次绘制中对所有顶点或者像素保持一致值。适用于顶点着色器和片段着色器
- 纹理（Textures）。从像素或纹理元素中获取的数据。适用于顶点着色器和片段着色器
- 可变量（Varyings）。顶点着色器给片段着色器传值的一种方式。给顶点着色器中可变量设置的值，会作为参考值进行内插，在绘制像素时传给片段着色器的可变量

本篇文章主要讲的是`属性`和`缓冲`。`缓冲`是发送到GPU的一些二进制数据序列，是GPU中的一块内存区域，可以存储任何数据。`属性`用来指明怎么从缓冲中获取所需数据并将它提供给顶点着色器。

本节使用到的html代码如下：
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="WebGL" />
  <title>WebGL</title>
  <style>
    body {
      margin: 20px;
    }
    #webgl {
      width: 500px;
      height: 500px;
    }
    .container {
      font-size: 0;
      display: inline-block;
      border: 1px solid black;
      background: red;
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas width="500" height="500" id="webgl">你的浏览器不支持canvas</canvas>
  </div>
  <script src="./initShaders.js"></script>
  <script src="./index.js"></script>
</body>
</html>
```

## 属性

在 WebGL 中，属性是顶点着色器的输入，可以直接给属性赋值，也可以从缓冲中获取数据。有两种方式可以给属性赋值：

- `WebGLRenderingContext.vertexAttrib[1234]f[v]()`。这种方式不常用，了解一下即可
- 缓冲。常用的方式

下面的代码通过gl.vertexAttrib2f给属性赋值绘制一个点：

```js
const canvas = document.getElementById('webgl')
const gl = canvas.getContext('webgl')
const vertexShaderSource = `
    attribute vec2 a_position1;
    void main() {
      gl_Position = vec4(a_position1, 0, 1);
      gl_PointSize = 10.0;
    }
`
const fragmentShaderSource = `
    precision mediump float;
    void main() {
      gl_FragColor = vec4(1,0,0.5,1);
    }
`
const program = initShaders(gl, vertexShaderSource, fragmentShaderSource)
const positionLocation1 = gl.getAttribLocation(program, 'a_position1')

gl.clearColor(0, 0, 0, 0)
gl.clear(gl.COLOR_BUFFER_BIT);

gl.useProgram(program)
gl.vertexAttrib2f(positionLocation1, 0.5, 0.5)

gl.drawArrays(gl.POINTS, 0, 1)
```

结果如下，在(0.5,0.5)坐标上绘制了一个10 * 10大小的点
